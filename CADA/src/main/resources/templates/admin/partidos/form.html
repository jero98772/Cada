<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Partido - Formulario - CABA Pro</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-primary">
    <div class="container">
        <a class="navbar-brand" href="/admin">CABA Pro - Admin</a>
        <div class="navbar-nav ms-auto">
            <a class="nav-link" href="/admin">Dashboard</a>
            <a class="nav-link" href="/admin/arbitros">Árbitros</a>
            <a class="nav-link active" href="/admin/partidos">Partidos</a>
            <a class="nav-link" href="/admin/torneos">Torneos</a>
            <a class="nav-link" href="/logout">Cerrar Sesión</a>
        </div>
    </div>
</nav>

<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="card">
                <div class="card-header">
                    <h1 class="mb-0" th:text="${partido != null && partido.id != null} ? 'Editar Partido' : 'Nuevo Partido'">Nuevo Partido</h1>
                </div>
                <div class="card-body">
                    <form th:action="${partido != null && partido.id != null} ? @{/admin/partidos/{id}(id=${partido.id})} : @{/admin/partidos}" method="post">
                        <div class="mb-3">
                            <label class="form-label" for="fechaHora">Fecha y hora</label>
                            <input class="form-control" id="fechaHora" name="fechaHora" type="datetime-local"
                                   th:value="${partido != null && partido.fechaHora != null} ? ${#temporals.format(partido.fechaHora, 'yyyy-MM-dd''T''HH:mm')} : ''" />
                        </div>
                        <div class="mb-3">
                            <label class="form-label" for="sede">Sede</label>
                            <input class="form-control" id="sede" name="sede" type="text" th:value="${partido != null} ? ${partido.sede} : ''" />
                        </div>
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label class="form-label" for="equipoLocal">Equipo local</label>
                                <input class="form-control" id="equipoLocal" name="equipoLocal" type="text" th:value="${partido != null} ? ${partido.equipoLocal} : ''" />
                            </div>
                            <div class="col-md-6">
                                <label class="form-label" for="equipoVisitante">Equipo visitante</label>
                                <input class="form-control" id="equipoVisitante" name="equipoVisitante" type="text" th:value="${partido != null} ? ${partido.equipoVisitante} : ''" />
                            </div>
                        </div>
                        <div class="mt-3">
                            <label class="form-label" for="torneoId">Torneo</label>
                            <select class="form-select" id="torneoId" name="torneoId">
                                <option value="" th:selected="${partido == null || partido.torneoId == null}">Sin torneo</option>
                                <option th:each="t : ${torneos}" th:value="${t.id}" th:text="${t.nombre}"
                                        th:selected="${partido != null && partido.torneoId != null && partido.torneoId == t.id}">Torneo</option>
                            </select>
                        </div>
                        <div class="mt-3">
                            <label class="form-label" for="arbitroId">Árbitro</label>
                            <select class="form-select" id="arbitroId" name="arbitroId" required>
                                <option value="">Seleccione un árbitro</option>
                                <option th:each="a : ${arbitros}"
                                        th:value="${a.id}"
                                        th:text="${a.nombre + ' ' + a.apellido}"
                                        th:selected="${partido != null && partido.arbitroId != null && partido.arbitroId == a.id}">Árbitro</option>
                            </select>
                        </div>
                        <div class="d-flex justify-content-end gap-2 mt-4">
                            <a class="btn btn-secondary" th:href="@{/admin/partidos}">Cancelar</a>
                            <button class="btn btn-primary" type="submit">Guardar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

